<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Regex | Living Systems_</title>

      <link rel="stylesheet" href="/css/main.min.029837f0c3987a286167e526bfc9b74e9962449d138fc3d09f34d1bad58ff017.css" integrity="sha256-Apg38MOYeihhZ&#43;Umv8m3TpliRJ0Tj8PQnzTRutWP8Bc=" crossorigin="anonymous">


      <script src="/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js" integrity="sha256-I80MfYNyY7nq65buLZzPopadqj&#43;gD6HB/ocBqbhyUaE=" crossorigin="anonymous"></script>

<link rel="alternate" type="application/rss+xml" href="/tags/regex/index.xml" title="Living Systems_">


</head>
<body>
  <header>
    <h1><a href="/">Living Systems_</a></h1>

  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/posts/">Posts</a>
    </li>
    <li>
      <a href="/tags/">Tags</a>
    </li>
    <li>
      <a href="/about/">About</a>
    </li>
    </ul>
  </nav>


  </header>
  <main>
    
  <h1>Regex</h1>
  
  
    <div class="post-card">

<h2><a href="/posts/galaxy-toolconfig-to-docbook-cmdsynopsis/">Partial Galaxy ToolConfig to DocBook CmdSynopsis conversion with XSLT RegEx</a></h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000">&lt;tool</span> <span style="color:#836c28">id=</span><span style="color:#c41a16">&#34;sam_to_bam&#34;</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;SAM-to-BAM&#34;</span> <span style="color:#836c28">version=</span><span style="color:#c41a16">&#34;1.1.1&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;description&gt;</span>converts SAM format to BAM format<span style="color:#000">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;requirements&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;requirement</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;package&#34;</span><span style="color:#000">&gt;</span>samtools<span style="color:#000">&lt;/requirement&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/requirements&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;command</span> <span style="color:#836c28">interpreter=</span><span style="color:#c41a16">&#34;python&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>    sam_to_bam.py
</span></span><span style="display:flex;"><span>      --input1=$source.input1
</span></span><span style="display:flex;"><span>      --dbkey=${input1.metadata.dbkey}
</span></span><span style="display:flex;"><span>      #if $source.index_source == &#34;history&#34;:
</span></span><span style="display:flex;"><span>        --ref_file=$source.ref_file
</span></span><span style="display:flex;"><span>      #else
</span></span><span style="display:flex;"><span>        --ref_file=&#34;None&#34;
</span></span><span style="display:flex;"><span>      #end if
</span></span><span style="display:flex;"><span>      --output1=$output1
</span></span><span style="display:flex;"><span>      --index_dir=${GALAXY_DATA_INDEX_DIR}
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/command&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;inputs&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;conditional</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;source&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;param</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;index_source&#34;</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;select&#34;</span> <span style="color:#836c28">label=</span><span style="color:#c41a16">&#34;Choose the source for the reference list&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;option</span> <span style="color:#836c28">value=</span><span style="color:#c41a16">&#34;cached&#34;</span><span style="color:#000">&gt;</span>Locally cached<span style="color:#000">&lt;/option&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;option</span> <span style="color:#836c28">value=</span><span style="color:#c41a16">&#34;history&#34;</span><span style="color:#000">&gt;</span>History<span style="color:#000">&lt;/option&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;when</span> <span style="color:#836c28">value=</span><span style="color:#c41a16">&#34;cached&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;param</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;input1&#34;</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;data&#34;</span> <span style="color:#836c28">format=</span><span style="color:#c41a16">&#34;sam&#34;</span> <span style="color:#836c28">label=</span><span style="color:#c41a16">&#34;SAM File to Convert&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#000">&lt;validator</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;unspecified_build&#34;</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#000">&lt;validator</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;dataset_metadata_in_file&#34;</span> <span style="color:#836c28">filename=</span><span style="color:#c41a16">&#34;sam_fa_indices.loc&#34;</span> <span style="color:#836c28">metadata_name=</span><span style="color:#c41a16">&#34;dbkey&#34;</span> <span style="color:#836c28">metadata_column=</span><span style="color:#c41a16">&#34;1&#34;</span> <span style="color:#836c28">message=</span><span style="color:#c41a16">&#34;Sequences are not currently available for the specified build.&#34;</span> <span style="color:#836c28">line_startswith=</span><span style="color:#c41a16">&#34;index&#34;</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;when</span> <span style="color:#836c28">value=</span><span style="color:#c41a16">&#34;history&#34;</span><span style="color:#000">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;param</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;input1&#34;</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;data&#34;</span> <span style="color:#836c28">format=</span><span style="color:#c41a16">&#34;sam&#34;</span> <span style="color:#836c28">label=</span><span style="color:#c41a16">&#34;Convert SAM file&#34;</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">&lt;param</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;ref_file&#34;</span> <span style="color:#836c28">type=</span><span style="color:#c41a16">&#34;data&#34;</span> <span style="color:#836c28">format=</span><span style="color:#c41a16">&#34;fasta&#34;</span> <span style="color:#836c28">label=</span><span style="color:#c41a16">&#34;Using reference file&#34;</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;/conditional&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/inputs&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;outputs&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">&lt;data</span> <span style="color:#836c28">format=</span><span style="color:#c41a16">&#34;bam&#34;</span> <span style="color:#836c28">name=</span><span style="color:#c41a16">&#34;output1&#34;</span> <span style="color:#836c28">label=</span><span style="color:#c41a16">&#34;${tool.name} on ${on_string}: converted BAM&#34;</span> <span style="color:#000">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">&lt;/outputs&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">&lt;/xml&gt;</span>
</span></span></code></pre></div><p>&hellip; you see that in the <strong>command</strong> tag, the actual syntax of the
command is specified in a kind of &ldquo;free text&rdquo; format &hellip; This might
not be exactly what one might think to use XSLT transformations for, but
together with the regex functionality in XSLT 2.0 you definitely has
this option too. Helped by <a href="http://www.xml.com/pub/a/2003/06/04/tr.html" target="_blank" rel="noopener">this
article</a>
 on xml.com, I put
together this little XSLT stylesheet for parsing up the free text
content of that command tag (haven&rsquo;t got to the more detailed config
inside the inputs-tag in the galaxy format, but might not need either,
if staying with the galaxy format anyway):</p>
</div>

  

  </main>
  <footer>
    <p>Copyright &copy; 2024 Samuel Lampa. All rights reserved.
Find me on <a href="https://orcid.org/0000-0001-6740-9212" target="_blank">ORCID</a>, <a href="https://github.com/samuell" target="_blank">GitHub</a>, <a href="https://twitter.com/smllmp" target="_blank">Twitter</a> or <a href="https://linkedin.com/in/smllmp" target="_blank">LinkedIn</a>.
</p>

  </footer>
</body>
</html>
